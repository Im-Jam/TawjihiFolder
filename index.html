
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta Tags and Title -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بنك الاسئلة</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#" onclick="showPage('home-page')">بنك الاسئلة</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <!-- Left Side of Navbar -->
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('home-page')">الصفحة الرئيسية</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showPage('bookmarks-page')">الاسئلة المحفوظة</a>
                    </li>
                </ul>
           <!-- Right Side of Navbar -->
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                  <!-- Existing Dark Mode Toggle -->
                  <li class="nav-item">
                    <a class="nav-link" href="#" id="darkModeToggle">
                      <i class="bi bi-moon-fill"></i> الوضع الداكن
                    </a>
                  </li>
                  <!-- User Account Dropdown -->
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="userMenu" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      حسابي
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
                      <li><a class="dropdown-item" href="#" id="loginButton">تسجيل الدخول</a></li>
                      <li><a class="dropdown-item" href="#" id="logoutButton">تسجيل الخروج</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="#" id="backupButton">نسخ احتياطي للبيانات</a></li>
                      <li><a class="dropdown-item" href="#" id="restoreButton">استعادة البيانات</a></li>
                    </ul>
                  </li>
                </ul>

                <!-- Removed Search Form -->
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <div class="container">
        <!-- Home Page -->
        <div id="home-page" class="page active">
            <div class="container mt-4">
                <h1>اختيار المواد والوحدات</h1>
                <!-- Subject Selection -->
                <div class="mb-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="form-label">اختار المواد</label>
                        <button id="select-all-subjects" class="btn btn-sm btn-outline-primary">تحديد الكل</button>
                    </div>
                    <div id="subjects-container" class="form-check">
                        <!-- Subjects will be loaded here -->
                    </div>
                </div>
                <!-- Systems Selection -->
                <div class="mb-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="form-label">اختار الوحدات</label>
                        <button id="select-all-systems" class="btn btn-sm btn-outline-primary">تحديد الكل</button>
                    </div>
                    <div id="systems-container">
                        <p>قم بختيار مادة واحدة على الاقل اولا</p>
                    </div>
                </div>
                <!-- Proceed Button -->
                <div class="mb-3">
                    <button id="proceed-button" class="btn btn-primary" disabled>اكمل</button>
                </div>
            </div>
        </div>
        <!-- Bookmarks Page -->
        <div id="bookmarks-page" class="page">
            <div class="container mt-4">
                <h1>الاسئلة المحفوظة</h1>
                <div id="bookmarks-container">
                    <!-- Bookmarked questions will be loaded here -->
                </div>
            </div>
        </div>
        <!-- Questions List Page -->
        <div id="questions-list-page" class="page">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb" id="questions-breadcrumb">
                    <!-- Breadcrumb will be populated via JavaScript -->
                </ol>
            </nav>
            <h2 class="mb-4">الاسئلة</h2>
            <!-- Filter Options -->
            <div class="mb-4">
                <label for="filter" class="form-label">فرز الاسئلة</label>
                <select name="filter" id="filter" class="form-select">
                    <option value="all">جميع الاسئلة</option>
                    <option value="correct">المجابة صحيحا</option>
                    <option value="incorrect">المجابة خاطئا</option>
                    <option value="unanswered">من دون اجابة</option>
                </select>
            </div>
            <!-- Questions List -->
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="questions-list">
                <!-- Questions will be loaded here -->
            </div>
        </div>
        <!-- Individual Question Page -->
        <div id="question-page" class="page">
            <!-- Breadcrumb Navigation -->
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb" id="question-breadcrumb">
                    <!-- Breadcrumb will be populated via JavaScript -->
                </ol>
            </nav>
            <div class="container py-4">
                <!-- Navigation Buttons -->
                <div class="d-flex justify-content-between mb-4">
                    <button id="previous-question" class="btn btn-outline-secondary">السؤال السابق</button>
                    <button onclick="showPage('questions-list-page')" class="btn btn-outline-primary">العودة الى الاسئلة</button>
                    <button id="next-question" class="btn btn-outline-primary">السؤال التالي</button>
                </div>
                <div class="row">
                    <div class="col-lg-8">
                        <!-- Question Card -->
                        <div class="card mb-4">
                            <div class="card-header bg-primary text-white">
                                <h2 class="mb-0" id="question-title">سؤال</h2>
                            </div>
                            <div class="card-body markdown-content" id="question-text">
                                <!-- Question text will be loaded here -->
                            </div>
                        </div>
                        <!-- Choices -->
                        <h3>الاجابات</h3>
                        <div class="btn-group-vertical mb-4" id="choices" role="group" aria-label="Choices">
                            <!-- Choices will be loaded here -->
                        </div>
                        <div class="d-flex justify-content-between mb-4">
                            <button id="saveAnswer" class="btn btn-success">احفظ اجابتك</button>
                            <button id="revealAnswer" class="btn btn-info">اظهار الاجابة الصحيحة</button>
                            <button id="bookmarkQuestion" class="btn btn-warning">احفظ السؤال</button>
                        </div>
                        <!-- Answer Explanation -->
                        <div id="answerExplanation" class="card mb-4 hidden">
                            <div class="card-header bg-success text-white">
                                <h4 class="mb-0" id="correct-answer">الاجابة الصحيحة</h4>
                            </div>
                            <div class="card-body markdown-content" id="explanation-text">
                                <!-- Explanation will be loaded here -->
                            </div>
                        </div>
                    </div>
                    <!-- Removed Media Files Section -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="liveToast" class="toast align-items-center text-white bg-primary border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">
                    <!-- Toast message will be injected here -->
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- External JavaScript -->
    <script type="module">
  // Import Firebase modules
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-analytics.js";
  import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js';
  import { getFirestore, doc, setDoc, getDoc } from 'https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore.js';

  // Your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyCF1VuNvhbHF5L3qiSjER0s-gQWEiIAPq8",
    authDomain: "tawjihifolder.firebaseapp.com",
    projectId: "tawjihifolder",
    storageBucket: "tawjihifolder.appspot.com",
    messagingSenderId: "963092650429",
    appId: "1:963092650429:web:ce896548cf328b66d2dad4",
    measurementId: "G-487PZPDLJT"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth();
  const db = getFirestore();
</script>

    <script src="js/scripts.js"></script>
</body>
</html>
